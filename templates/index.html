<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>GeoMap - Mapa de Ubicaciones</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

<div class="container my-4">
    <h1 class="text-center mb-4">üåé GeoMap - Mapa de Ubicaciones</h1>

    <!-- Filtro de categor√≠as -->
    <div class="row mb-4 justify-content-center">
        <div class="col-md-4">
            <select id="categoriaFiltro" class="form-select">
                <option value="">Todas las Categor√≠as</option>
            </select>
        </div>
    </div>

    <!-- Mapa -->
    <div id="map"></div>

    <!-- Buscar lugares cercanos -->
    <h2 class="text-center mt-5">üîç Buscar Lugares Cercanos</h2>
    <form id="buscarForm" class="row g-3 justify-content-center">
        <div class="col-md-3">
            <input type="number" id="buscarLatitud" class="form-control" placeholder="Latitud" step="any" required>
        </div>
        <div class="col-md-3">
            <input type="number" id="buscarLongitud" class="form-control" placeholder="Longitud" step="any" required>
        </div>
        <div class="col-md-3">
            <input type="number" id="buscarRadio" class="form-control" placeholder="Radio en Km" step="any" required>
        </div>
        <div class="col-md-3 d-grid">
            <button type="button" onclick="buscarCercanos()" class="btn btn-primary">Buscar Cercanos</button>
        </div>
    </form>

    <!-- Agregar nueva ubicaci√≥n -->
    <h2 class="text-center mt-5">‚ûï Agregar Nueva Ubicaci√≥n</h2>
    <form id="addForm" class="row g-3 justify-content-center mt-3">
        <div class="col-md-3">
            <input type="text" id="nombre" class="form-control" placeholder="Nombre" required>
        </div>
        <div class="col-md-3">
            <input type="text" id="descripcion" class="form-control" placeholder="Descripci√≥n" required>
        </div>
        <div class="col-md-2">
            <input type="number" id="latitud" class="form-control" placeholder="Latitud" step="any" required>
        </div>
        <div class="col-md-2">
            <input type="number" id="longitud" class="form-control" placeholder="Longitud" step="any" required>
        </div>
        <div class="col-md-3">
            <select id="categoria" class="form-select" required>
                <option value="">Selecciona Categor√≠a</option>
            </select>
        </div>
        <div class="col-md-2 d-grid">
            <button type="submit" class="btn btn-success">Agregar</button>
        </div>
    </form>
</div>

<!-- Agregar nueva categor√≠a -->
<h2 class="text-center mt-5">‚ûï Agregar Nueva Categor√≠a</h2>
<form id="addCategoriaForm" class="row g-3 justify-content-center mt-3">
    <div class="col-md-4">
        <input type="text" id="nuevaCategoria" class="form-control" placeholder="Nombre de Categor√≠a" required>
    </div>
    <div class="col-md-2 d-grid">
        <button type="submit" class="btn btn-primary">Agregar Categor√≠a</button>
    </div>
</form>


<h1></h1>

<!-- Librer√≠as externas primero -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Ahora tus scripts locales -->
<script src="/static/js/api.js"></script>
<script src="/static/js/mapa.js"></script>
<script src="/static/js/eliminar.js"></script>
<script src="/static/js/editar.js"></script>
<script src="/static/js/buscar.js"></script>
<script src="/static/js/categoria.js"></script>

<!-- Inicializaci√≥n al cargar todo -->
<script>
    cargarCategorias().then(() => {
        cargarUbicaciones();
    });
</script>

</body>
</html>
